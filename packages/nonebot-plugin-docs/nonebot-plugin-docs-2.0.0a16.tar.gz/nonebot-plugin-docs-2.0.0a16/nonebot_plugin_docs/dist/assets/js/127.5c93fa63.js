(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{601:function(e,s,t){"use strict";t.r(s);var a=t(21),_=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"nonebot-permission-模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-permission-模块"}},[e._v("#")]),e._v(" NoneBot.permission 模块")]),e._v(" "),t("h2",{attrs:{id:"权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#权限"}},[e._v("#")]),e._v(" 权限")]),e._v(" "),t("p",[e._v("每个 "),t("code",[e._v("Matcher")]),e._v(" 拥有一个 "),t("code",[e._v("Permission")]),e._v(" ，其中是 "),t("strong",[e._v("异步")]),e._v(" "),t("code",[e._v("PermissionChecker")]),e._v(" 的集合，只要有一个 "),t("code",[e._v("PermissionChecker")]),e._v(" 检查结果为 "),t("code",[e._v("True")]),e._v(" 时就会继续运行。")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),t("p",[t("code",[e._v("PermissionChecker")]),e._v(" 既可以是 async function 也可以是 sync function")])]),e._v(" "),t("h2",{attrs:{id:"class-permission"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#class-permission"}},[e._v("#")]),e._v(" "),t("em",[e._v("class")]),e._v(" "),t("code",[e._v("Permission")])]),e._v(" "),t("p",[e._v("基类："),t("code",[e._v("object")])]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("说明")])]),e._v(" "),t("p",[t("code",[e._v("Matcher")]),e._v(" 规则类，当事件传递时，在 "),t("code",[e._v("Matcher")]),e._v(" 运行前进行检查。")])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("示例")])])])]),e._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[e._v("Permission"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("async_function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" sync_function\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 等价于")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" nonebot"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("utils "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" run_sync\nPermission"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("async_function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" run_sync"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("sync_function"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("h3",{attrs:{id:"init-checkers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#init-checkers"}},[e._v("#")]),e._v(" "),t("code",[e._v("__init__(*checkers)")])]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("参数")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("*checkers: Callable[[Bot, Event], Awaitable[bool]]")]),e._v(": "),t("strong",[e._v("异步")]),e._v(" PermissionChecker")])])])]),e._v(" "),t("h3",{attrs:{id:"checkers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#checkers"}},[e._v("#")]),e._v(" "),t("code",[e._v("checkers")])]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("说明")])]),e._v(" "),t("p",[e._v("存储 "),t("code",[e._v("PermissionChecker")])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("类型")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("Set[Callable[[Bot, Event], Awaitable[bool]]]")])])])])]),e._v(" "),t("h3",{attrs:{id:"async-call-bot-event"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#async-call-bot-event"}},[e._v("#")]),e._v(" "),t("em",[e._v("async")]),e._v(" "),t("code",[e._v("__call__(bot, event)")])]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("说明")])]),e._v(" "),t("p",[e._v("检查是否满足某个权限")])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("参数")])]),e._v(" "),t("ul",[t("li",[t("p",[t("code",[e._v("bot: Bot")]),e._v(": Bot 对象")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("event: Event")]),e._v(": Event 对象")])])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("返回")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("bool")])])])])]),e._v(" "),t("h2",{attrs:{id:"message"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#message"}},[e._v("#")]),e._v(" "),t("code",[e._v("MESSAGE")])]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("说明")]),e._v(": 匹配任意 "),t("code",[e._v("message")]),e._v(" 类型事件，仅在需要同时捕获不同类型事件时使用。优先使用 message type 的 Matcher。")])]),e._v(" "),t("h2",{attrs:{id:"notice"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#notice"}},[e._v("#")]),e._v(" "),t("code",[e._v("NOTICE")])]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("说明")]),e._v(": 匹配任意 "),t("code",[e._v("notice")]),e._v(" 类型事件，仅在需要同时捕获不同类型事件时使用。优先使用 notice type 的 Matcher。")])]),e._v(" "),t("h2",{attrs:{id:"request"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[e._v("#")]),e._v(" "),t("code",[e._v("REQUEST")])]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("说明")]),e._v(": 匹配任意 "),t("code",[e._v("request")]),e._v(" 类型事件，仅在需要同时捕获不同类型事件时使用。优先使用 request type 的 Matcher。")])]),e._v(" "),t("h2",{attrs:{id:"metaevent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#metaevent"}},[e._v("#")]),e._v(" "),t("code",[e._v("METAEVENT")])]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("说明")]),e._v(": 匹配任意 "),t("code",[e._v("meta_event")]),e._v(" 类型事件，仅在需要同时捕获不同类型事件时使用。优先使用 meta_event type 的 Matcher。")])]),e._v(" "),t("h2",{attrs:{id:"user-user-perm-none"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#user-user-perm-none"}},[e._v("#")]),e._v(" "),t("code",[e._v("USER(*user, perm=None)")])]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("说明")])]),e._v(" "),t("p",[t("code",[e._v("event")]),e._v(" 的 "),t("code",[e._v("session_id")]),e._v(" 在白名单内且满足 perm")])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("参数")])]),e._v(" "),t("ul",[t("li",[t("p",[t("code",[e._v("*user: str")]),e._v(": 白名单")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("perm: Optional[Permission]")]),e._v(": 需要同时满足的权限")])])])])]),e._v(" "),t("h2",{attrs:{id:"superuser"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#superuser"}},[e._v("#")]),e._v(" "),t("code",[e._v("SUPERUSER")])]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("说明")]),e._v(": 匹配任意超级用户消息类型事件")])])])}),[],!1,null,null,null);s.default=_.exports}}]);