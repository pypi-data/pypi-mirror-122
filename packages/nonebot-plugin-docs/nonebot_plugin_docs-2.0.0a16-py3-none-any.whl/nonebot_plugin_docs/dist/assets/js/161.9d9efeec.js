(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{464:function(t,a,e){"use strict";e.r(a);var r=e(21),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"nonebot-drivers-fastapi-模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-drivers-fastapi-模块"}},[t._v("#")]),t._v(" NoneBot.drivers.fastapi 模块")]),t._v(" "),e("h2",{attrs:{id:"fastapi-驱动适配"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-驱动适配"}},[t._v("#")]),t._v(" FastAPI 驱动适配")]),t._v(" "),e("p",[t._v("本驱动同时支持服务端以及客户端连接")]),t._v(" "),e("p",[t._v("后端使用方法请参考: "),e("a",{attrs:{href:"https://fastapi.tiangolo.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("FastAPI 文档"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"class-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-config"}},[t._v("#")]),t._v(" "),e("em",[t._v("class")]),t._v(" "),e("code",[t._v("Config")])]),t._v(" "),e("p",[t._v("基类："),e("code",[t._v("pydantic.env_settings.BaseSettings")])]),t._v(" "),e("p",[t._v("FastAPI 驱动框架设置，详情参考 FastAPI 文档")]),t._v(" "),e("h3",{attrs:{id:"fastapi-openapi-url"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-openapi-url"}},[t._v("#")]),t._v(" "),e("code",[t._v("fastapi_openapi_url")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Optional[str]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[e("code",[t._v("openapi.json")]),t._v(" 地址，默认为 "),e("code",[t._v("None")]),t._v(" 即关闭")])])]),t._v(" "),e("h3",{attrs:{id:"fastapi-docs-url"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-docs-url"}},[t._v("#")]),t._v(" "),e("code",[t._v("fastapi_docs_url")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Optional[str]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[e("code",[t._v("swagger")]),t._v(" 地址，默认为 "),e("code",[t._v("None")]),t._v(" 即关闭")])])]),t._v(" "),e("h3",{attrs:{id:"fastapi-redoc-url"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-redoc-url"}},[t._v("#")]),t._v(" "),e("code",[t._v("fastapi_redoc_url")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Optional[str]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[e("code",[t._v("redoc")]),t._v(" 地址，默认为 "),e("code",[t._v("None")]),t._v(" 即关闭")])])]),t._v(" "),e("h3",{attrs:{id:"fastapi-reload"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-reload"}},[t._v("#")]),t._v(" "),e("code",[t._v("fastapi_reload")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Optional[bool]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("开启/关闭冷重载，默认会在配置了 app 的 debug 模式启用")])])]),t._v(" "),e("h3",{attrs:{id:"fastapi-reload-dirs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-reload-dirs"}},[t._v("#")]),t._v(" "),e("code",[t._v("fastapi_reload_dirs")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Optional[List[str]]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("重载监控文件夹列表，默认为 uvicorn 默认值")])])]),t._v(" "),e("h3",{attrs:{id:"fastapi-reload-delay"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-reload-delay"}},[t._v("#")]),t._v(" "),e("code",[t._v("fastapi_reload_delay")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Optional[float]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("重载延迟，默认为 uvicorn 默认值")])])]),t._v(" "),e("h3",{attrs:{id:"fastapi-reload-includes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-reload-includes"}},[t._v("#")]),t._v(" "),e("code",[t._v("fastapi_reload_includes")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Optional[List[str]]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("要监听的文件列表，支持 glob pattern，默认为 uvicorn 默认值")])])]),t._v(" "),e("h3",{attrs:{id:"fastapi-reload-excludes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-reload-excludes"}},[t._v("#")]),t._v(" "),e("code",[t._v("fastapi_reload_excludes")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("类型")])]),t._v(" "),e("p",[e("code",[t._v("Optional[List[str]]")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("不要监听的文件列表，支持 glob pattern，默认为 uvicorn 默认值")])])]),t._v(" "),e("h2",{attrs:{id:"class-driver"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-driver"}},[t._v("#")]),t._v(" "),e("em",[t._v("class")]),t._v(" "),e("code",[t._v("Driver")])]),t._v(" "),e("p",[t._v("基类："),e("router-link",{attrs:{to:"./#nonebot.drivers.ReverseDriver"}},[e("code",[t._v("nonebot.drivers.ReverseDriver")])]),t._v(", "),e("router-link",{attrs:{to:"./#nonebot.drivers.ForwardDriver"}},[e("code",[t._v("nonebot.drivers.ForwardDriver")])])],1),t._v(" "),e("p",[t._v("FastAPI 驱动框架")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("上报地址")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("/{adapter name}/")]),t._v(": HTTP POST 上报")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("/{adapter name}/http/")]),t._v(": HTTP POST 上报")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("/{adapter name}/ws")]),t._v(": WebSocket 上报")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("/{adapter name}/ws/")]),t._v(": WebSocket 上报")])])])])]),t._v(" "),e("h3",{attrs:{id:"property-type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#property-type"}},[t._v("#")]),t._v(" "),e("em",[t._v("property")]),t._v(" "),e("code",[t._v("type")])]),t._v(" "),e("p",[t._v("驱动名称: "),e("code",[t._v("fastapi")])]),t._v(" "),e("h3",{attrs:{id:"property-server-app"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#property-server-app"}},[t._v("#")]),t._v(" "),e("em",[t._v("property")]),t._v(" "),e("code",[t._v("server_app")])]),t._v(" "),e("p",[e("code",[t._v("FastAPI APP")]),t._v(" 对象")]),t._v(" "),e("h3",{attrs:{id:"property-asgi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#property-asgi"}},[t._v("#")]),t._v(" "),e("em",[t._v("property")]),t._v(" "),e("code",[t._v("asgi")])]),t._v(" "),e("p",[e("code",[t._v("FastAPI APP")]),t._v(" 对象")]),t._v(" "),e("h3",{attrs:{id:"property-logger"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#property-logger"}},[t._v("#")]),t._v(" "),e("em",[t._v("property")]),t._v(" "),e("code",[t._v("logger")])]),t._v(" "),e("p",[t._v("fastapi 使用的 logger")]),t._v(" "),e("h3",{attrs:{id:"on-startup-func"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#on-startup-func"}},[t._v("#")]),t._v(" "),e("code",[t._v("on_startup(func)")])]),t._v(" "),e("p",[t._v("参考文档: "),e("a",{attrs:{href:"https://fastapi.tiangolo.com/advanced/events/#startup-event",target:"_blank",rel:"noopener noreferrer"}},[t._v("Events"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"on-shutdown-func"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#on-shutdown-func"}},[t._v("#")]),t._v(" "),e("code",[t._v("on_shutdown(func)")])]),t._v(" "),e("p",[t._v("参考文档: "),e("a",{attrs:{href:"https://fastapi.tiangolo.com/advanced/events/#startup-event",target:"_blank",rel:"noopener noreferrer"}},[t._v("Events"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"setup-http-polling-setup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-http-polling-setup"}},[t._v("#")]),t._v(" "),e("code",[t._v("setup_http_polling(setup)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("注册一个 HTTP 轮询连接，如果传入一个函数，则该函数会在每次连接时被调用")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("setup: Union[HTTPPollingSetup, Callable[[], Awaitable[HTTPPollingSetup]]]")])])])])]),t._v(" "),e("h3",{attrs:{id:"setup-websocket-setup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setup-websocket-setup"}},[t._v("#")]),t._v(" "),e("code",[t._v("setup_websocket(setup)")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("说明")])]),t._v(" "),e("p",[t._v("注册一个 WebSocket 连接，如果传入一个函数，则该函数会在每次重连时被调用")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("setup: Union[WebSocketSetup, Callable[[], Awaitable[WebSocketSetup]]]")])])])])]),t._v(" "),e("h3",{attrs:{id:"run-host-none-port-none-app-none-kwargs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#run-host-none-port-none-app-none-kwargs"}},[t._v("#")]),t._v(" "),e("code",[t._v("run(host=None, port=None, *, app=None, **kwargs)")])]),t._v(" "),e("p",[t._v("使用 "),e("code",[t._v("uvicorn")]),t._v(" 启动 FastAPI")]),t._v(" "),e("h2",{attrs:{id:"class-websocket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-websocket"}},[t._v("#")]),t._v(" "),e("em",[t._v("class")]),t._v(" "),e("code",[t._v("WebSocket")])]),t._v(" "),e("p",[t._v("基类："),e("router-link",{attrs:{to:"./#nonebot.drivers.WebSocket"}},[e("code",[t._v("nonebot.drivers.WebSocket")])])],1)])}),[],!1,null,null,null);a.default=s.exports}}]);