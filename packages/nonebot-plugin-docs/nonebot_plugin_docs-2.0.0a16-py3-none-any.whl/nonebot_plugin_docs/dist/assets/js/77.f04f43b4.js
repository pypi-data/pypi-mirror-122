(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{549:function(t,e,a){"use strict";a.r(e);var r=a(21),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"nonebot-drivers-fastapi-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-drivers-fastapi-模块"}},[t._v("#")]),t._v(" NoneBot.drivers.fastapi 模块")]),t._v(" "),a("h2",{attrs:{id:"fastapi-驱动适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-驱动适配"}},[t._v("#")]),t._v(" FastAPI 驱动适配")]),t._v(" "),a("p",[t._v("本驱动同时支持服务端以及客户端连接")]),t._v(" "),a("p",[t._v("后端使用方法请参考: "),a("a",{attrs:{href:"https://fastapi.tiangolo.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("FastAPI 文档"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"class-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-config"}},[t._v("#")]),t._v(" "),a("em",[t._v("class")]),t._v(" "),a("code",[t._v("Config")])]),t._v(" "),a("p",[t._v("基类："),a("code",[t._v("pydantic.env_settings.BaseSettings")])]),t._v(" "),a("p",[t._v("FastAPI 驱动框架设置，详情参考 FastAPI 文档")]),t._v(" "),a("h3",{attrs:{id:"fastapi-openapi-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-openapi-url"}},[t._v("#")]),t._v(" "),a("code",[t._v("fastapi_openapi_url")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("类型")])]),t._v(" "),a("p",[a("code",[t._v("Optional[str]")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[a("code",[t._v("openapi.json")]),t._v(" 地址，默认为 "),a("code",[t._v("None")]),t._v(" 即关闭")])])]),t._v(" "),a("h3",{attrs:{id:"fastapi-docs-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-docs-url"}},[t._v("#")]),t._v(" "),a("code",[t._v("fastapi_docs_url")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("类型")])]),t._v(" "),a("p",[a("code",[t._v("Optional[str]")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[a("code",[t._v("swagger")]),t._v(" 地址，默认为 "),a("code",[t._v("None")]),t._v(" 即关闭")])])]),t._v(" "),a("h3",{attrs:{id:"fastapi-redoc-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-redoc-url"}},[t._v("#")]),t._v(" "),a("code",[t._v("fastapi_redoc_url")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("类型")])]),t._v(" "),a("p",[a("code",[t._v("Optional[str]")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[a("code",[t._v("redoc")]),t._v(" 地址，默认为 "),a("code",[t._v("None")]),t._v(" 即关闭")])])]),t._v(" "),a("h3",{attrs:{id:"fastapi-reload-dirs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fastapi-reload-dirs"}},[t._v("#")]),t._v(" "),a("code",[t._v("fastapi_reload_dirs")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("类型")])]),t._v(" "),a("p",[a("code",[t._v("List[str]")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[a("code",[t._v("debug")]),t._v(" 模式下重载监控文件夹列表，默认为 uvicorn 默认值")])])]),t._v(" "),a("h2",{attrs:{id:"class-driver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-driver"}},[t._v("#")]),t._v(" "),a("em",[t._v("class")]),t._v(" "),a("code",[t._v("Driver")])]),t._v(" "),a("p",[t._v("基类："),a("router-link",{attrs:{to:"./#nonebot.drivers.ReverseDriver"}},[a("code",[t._v("nonebot.drivers.ReverseDriver")])]),t._v(", "),a("router-link",{attrs:{to:"./#nonebot.drivers.ForwardDriver"}},[a("code",[t._v("nonebot.drivers.ForwardDriver")])])],1),t._v(" "),a("p",[t._v("FastAPI 驱动框架")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("上报地址")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("/{adapter name}/")]),t._v(": HTTP POST 上报")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("/{adapter name}/http/")]),t._v(": HTTP POST 上报")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("/{adapter name}/ws")]),t._v(": WebSocket 上报")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("/{adapter name}/ws/")]),t._v(": WebSocket 上报")])])])])]),t._v(" "),a("h3",{attrs:{id:"property-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#property-type"}},[t._v("#")]),t._v(" "),a("em",[t._v("property")]),t._v(" "),a("code",[t._v("type")])]),t._v(" "),a("p",[t._v("驱动名称: "),a("code",[t._v("fastapi")])]),t._v(" "),a("h3",{attrs:{id:"property-server-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#property-server-app"}},[t._v("#")]),t._v(" "),a("em",[t._v("property")]),t._v(" "),a("code",[t._v("server_app")])]),t._v(" "),a("p",[a("code",[t._v("FastAPI APP")]),t._v(" 对象")]),t._v(" "),a("h3",{attrs:{id:"property-asgi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#property-asgi"}},[t._v("#")]),t._v(" "),a("em",[t._v("property")]),t._v(" "),a("code",[t._v("asgi")])]),t._v(" "),a("p",[a("code",[t._v("FastAPI APP")]),t._v(" 对象")]),t._v(" "),a("h3",{attrs:{id:"property-logger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#property-logger"}},[t._v("#")]),t._v(" "),a("em",[t._v("property")]),t._v(" "),a("code",[t._v("logger")])]),t._v(" "),a("p",[t._v("fastapi 使用的 logger")]),t._v(" "),a("h3",{attrs:{id:"on-startup-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-startup-func"}},[t._v("#")]),t._v(" "),a("code",[t._v("on_startup(func)")])]),t._v(" "),a("p",[t._v("参考文档: "),a("a",{attrs:{href:"https://fastapi.tiangolo.com/advanced/events/#startup-event",target:"_blank",rel:"noopener noreferrer"}},[t._v("Events"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"on-shutdown-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-shutdown-func"}},[t._v("#")]),t._v(" "),a("code",[t._v("on_shutdown(func)")])]),t._v(" "),a("p",[t._v("参考文档: "),a("a",{attrs:{href:"https://fastapi.tiangolo.com/advanced/events/#startup-event",target:"_blank",rel:"noopener noreferrer"}},[t._v("Events"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"setup-http-polling-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup-http-polling-setup"}},[t._v("#")]),t._v(" "),a("code",[t._v("setup_http_polling(setup)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("注册一个 HTTP 轮询连接，如果传入一个函数，则该函数会在每次连接时被调用")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("setup: Union[HTTPPollingSetup, Callable[[], Awaitable[HTTPPollingSetup]]]")])])])])]),t._v(" "),a("h3",{attrs:{id:"setup-websocket-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup-websocket-setup"}},[t._v("#")]),t._v(" "),a("code",[t._v("setup_websocket(setup)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("注册一个 WebSocket 连接，如果传入一个函数，则该函数会在每次重连时被调用")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("setup: Union[WebSocketSetup, Callable[[], Awaitable[WebSocketSetup]]]")])])])])]),t._v(" "),a("h3",{attrs:{id:"run-host-none-port-none-app-none-kwargs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-host-none-port-none-app-none-kwargs"}},[t._v("#")]),t._v(" "),a("code",[t._v("run(host=None, port=None, *, app=None, **kwargs)")])]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("uvicorn")]),t._v(" 启动 FastAPI")]),t._v(" "),a("h2",{attrs:{id:"class-websocket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-websocket"}},[t._v("#")]),t._v(" "),a("em",[t._v("class")]),t._v(" "),a("code",[t._v("WebSocket")])]),t._v(" "),a("p",[t._v("基类："),a("router-link",{attrs:{to:"./#nonebot.drivers.WebSocket"}},[a("code",[t._v("nonebot.drivers.WebSocket")])])],1)])}),[],!1,null,null,null);e.default=s.exports}}]);