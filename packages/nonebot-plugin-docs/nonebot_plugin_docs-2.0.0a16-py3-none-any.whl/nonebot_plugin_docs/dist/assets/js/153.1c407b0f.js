(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{456:function(t,s,a){"use strict";a.r(s);var e=a(21),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"nonebot-adapters-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nonebot-adapters-模块"}},[t._v("#")]),t._v(" NoneBot.adapters 模块")]),t._v(" "),a("h2",{attrs:{id:"协议适配基类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#协议适配基类"}},[t._v("#")]),t._v(" 协议适配基类")]),t._v(" "),a("p",[t._v("各协议请继承以下基类，并使用 "),a("code",[t._v("driver.register_adapter")]),t._v(" 注册适配器")]),t._v(" "),a("h2",{attrs:{id:"class-bot"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-bot"}},[t._v("#")]),t._v(" "),a("em",[t._v("class")]),t._v(" "),a("code",[t._v("Bot")])]),t._v(" "),a("p",[t._v("基类："),a("code",[t._v("abc.ABC")])]),t._v(" "),a("p",[t._v("Bot 基类。用于处理上报消息，并提供 API 调用接口。")]),t._v(" "),a("h3",{attrs:{id:"driver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#driver"}},[t._v("#")]),t._v(" "),a("code",[t._v("driver")])]),t._v(" "),a("p",[t._v("Driver 对象")]),t._v(" "),a("h3",{attrs:{id:"config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[t._v("#")]),t._v(" "),a("code",[t._v("config")])]),t._v(" "),a("p",[t._v("Config 配置对象")]),t._v(" "),a("h3",{attrs:{id:"calling-api-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#calling-api-hook"}},[t._v("#")]),t._v(" "),a("code",[t._v("_calling_api_hook")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("类型")])]),t._v(" "),a("p",[a("code",[t._v("Set[T_CallingAPIHook]")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("call_api 时执行的函数")])])]),t._v(" "),a("h3",{attrs:{id:"called-api-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#called-api-hook"}},[t._v("#")]),t._v(" "),a("code",[t._v("_called_api_hook")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("类型")])]),t._v(" "),a("p",[a("code",[t._v("Set[T_CalledAPIHook]")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("call_api 后执行的函数")])])]),t._v(" "),a("h3",{attrs:{id:"init-self-id-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init-self-id-request"}},[t._v("#")]),t._v(" "),a("code",[t._v("__init__(self_id, request)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("self_id: str")]),t._v(": 机器人 ID")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("request: HTTPConnection")]),t._v(": request 连接对象")])])])])]),t._v(" "),a("h3",{attrs:{id:"self-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#self-id"}},[t._v("#")]),t._v(" "),a("code",[t._v("self_id")])]),t._v(" "),a("p",[t._v("机器人 ID")]),t._v(" "),a("h3",{attrs:{id:"request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[t._v("#")]),t._v(" "),a("code",[t._v("request")])]),t._v(" "),a("p",[t._v("连接信息")]),t._v(" "),a("h3",{attrs:{id:"abstract-property-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-property-type"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract property")]),t._v(" "),a("code",[t._v("type")])]),t._v(" "),a("p",[t._v("Adapter 类型")]),t._v(" "),a("h3",{attrs:{id:"classmethod-register-driver-config-kwargs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-register-driver-config-kwargs"}},[t._v("#")]),t._v(" "),a("em",[t._v("classmethod")]),t._v(" "),a("code",[t._v("register(driver, config, **kwargs)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[a("code",[t._v("register")]),t._v(" 方法会在 "),a("code",[t._v("driver.register_adapter")]),t._v(" 时被调用，用于初始化相关配置")])])]),t._v(" "),a("h3",{attrs:{id:"abstract-async-classmethod-check-permission-driver-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-classmethod-check-permission-driver-request"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract async classmethod")]),t._v(" "),a("code",[t._v("check_permission(driver, request)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("检查连接请求是否合法的函数，如果合法则返回当前连接 "),a("code",[t._v("唯一标识符")]),t._v("，通常为机器人 ID；如果不合法则抛出 "),a("code",[t._v("RequestDenied")]),t._v(" 异常。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("driver: Driver")]),t._v(": Driver 对象")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("request: HTTPConnection")]),t._v(": request 请求详情")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("Optional[str]")]),t._v(": 连接唯一标识符，"),a("code",[t._v("None")]),t._v(" 代表连接不合法")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Optional[HTTPResponse]")]),t._v(": HTTP 上报响应")])])])])]),t._v(" "),a("h3",{attrs:{id:"abstract-async-handle-message-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-handle-message-message"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract async")]),t._v(" "),a("code",[t._v("handle_message(message)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("处理上报消息的函数，转换为 "),a("code",[t._v("Event")]),t._v(" 事件后调用 "),a("code",[t._v("nonebot.message.handle_event")]),t._v(" 进一步处理事件。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("message: bytes")]),t._v(": 收到的上报消息")])])])]),t._v(" "),a("h3",{attrs:{id:"abstract-async-call-api-api-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-call-api-api-data"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract async")]),t._v(" "),a("code",[t._v("_call_api(api, **data)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[a("code",[t._v("adapter")]),t._v(" 实际调用 api 的逻辑实现函数，实现该方法以调用 api。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("api: str")]),t._v(": API 名称")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("**data")]),t._v(": API 数据")])])])])]),t._v(" "),a("h3",{attrs:{id:"async-call-api-api-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#async-call-api-api-data"}},[t._v("#")]),t._v(" "),a("em",[t._v("async")]),t._v(" "),a("code",[t._v("call_api(api, **data)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("调用机器人 API 接口，可以通过该函数或直接通过 bot 属性进行调用")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("api: str")]),t._v(": API 名称")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("**data")]),t._v(": API 数据")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例")])])])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("call_api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"send_msg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"abstract-async-send-event-message-kwargs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-async-send-event-message-kwargs"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract async")]),t._v(" "),a("code",[t._v("send(event, message, **kwargs)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("调用机器人基础发送消息接口")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("event: Event")]),t._v(": 上报事件")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("message: Union[str, Message, MessageSegment]")]),t._v(": 要发送的消息")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("**kwargs")])])])])])]),t._v(" "),a("h3",{attrs:{id:"classmethod-on-calling-api-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-on-calling-api-func"}},[t._v("#")]),t._v(" "),a("em",[t._v("classmethod")]),t._v(" "),a("code",[t._v("on_calling_api(func)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("调用 api 预处理。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("bot: Bot")]),t._v(": 当前 bot 对象")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("api: str")]),t._v(": 调用的 api 名称")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("data: Dict[str, Any]")]),t._v(": api 调用的参数字典")])])])])]),t._v(" "),a("h3",{attrs:{id:"classmethod-on-called-api-func"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-on-called-api-func"}},[t._v("#")]),t._v(" "),a("em",[t._v("classmethod")]),t._v(" "),a("code",[t._v("on_called_api(func)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("调用 api 后处理。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("bot: Bot")]),t._v(": 当前 bot 对象")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("exception: Optional[Exception]")]),t._v(": 调用 api 时发生的错误")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("api: str")]),t._v(": 调用的 api 名称")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("data: Dict[str, Any]")]),t._v(": api 调用的参数字典")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("result: Any")]),t._v(": api 调用的返回")])])])])]),t._v(" "),a("h2",{attrs:{id:"class-messagesegment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-messagesegment"}},[t._v("#")]),t._v(" "),a("em",[t._v("class")]),t._v(" "),a("code",[t._v("MessageSegment")])]),t._v(" "),a("p",[t._v("基类："),a("code",[t._v("Mapping")]),t._v(", "),a("code",[t._v("abc.ABC")]),t._v(", "),a("code",[t._v("Generic")]),t._v("["),a("code",[t._v("nonebot.adapters._message.TM")]),t._v("]")]),t._v(" "),a("p",[t._v("消息段基类")]),t._v(" "),a("h3",{attrs:{id:"type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[t._v("#")]),t._v(" "),a("code",[t._v("type")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("类型: "),a("code",[t._v("str")])])]),t._v(" "),a("li",[a("p",[t._v("说明: 消息段类型")])])]),t._v(" "),a("h3",{attrs:{id:"data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data"}},[t._v("#")]),t._v(" "),a("code",[t._v("data")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("类型: "),a("code",[t._v("Dict[str, Union[str, list]]")])])]),t._v(" "),a("li",[a("p",[t._v("说明: 消息段数据")])])]),t._v(" "),a("h2",{attrs:{id:"class-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-message"}},[t._v("#")]),t._v(" "),a("em",[t._v("class")]),t._v(" "),a("code",[t._v("Message")])]),t._v(" "),a("p",[t._v("基类："),a("code",[t._v("List")]),t._v("["),a("code",[t._v("nonebot.adapters._message.TMS")]),t._v("], "),a("code",[t._v("abc.ABC")])]),t._v(" "),a("p",[t._v("消息数组")]),t._v(" "),a("h3",{attrs:{id:"init-message-none-args-kwargs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init-message-none-args-kwargs"}},[t._v("#")]),t._v(" "),a("code",[t._v("__init__(message=None, *args, **kwargs)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("message: Union[str, list, dict, MessageSegment, Message, Any]")]),t._v(": 消息内容")])])])]),t._v(" "),a("h3",{attrs:{id:"classmethod-template-format-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#classmethod-template-format-string"}},[t._v("#")]),t._v(" "),a("em",[t._v("classmethod")]),t._v(" "),a("code",[t._v("template(format_string)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("根据创建消息模板, 用法和 "),a("code",[t._v("str.format")]),t._v(" 大致相同, 但是可以输出消息对象, 并且支持以 "),a("code",[t._v("Message")]),t._v(" 对象作为消息模板")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("示例")])])])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{} {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"world"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{} {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file///..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"world"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file///...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("       MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test {event.user_id}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("face"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("       MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test {event.message}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user_id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test 123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'face'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'face'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("233")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        MessageSegment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test hello world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("ul",[a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("format_string: str")]),t._v(": 格式化字符串")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("MessageFormatter[TM]")]),t._v(": 消息格式化器")])])])]),t._v(" "),a("h3",{attrs:{id:"append-obj"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#append-obj"}},[t._v("#")]),t._v(" "),a("code",[t._v("append(obj)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("添加一个消息段到消息数组末尾")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("obj: Union[str, MessageSegment]")]),t._v(": 要添加的消息段")])])])]),t._v(" "),a("h3",{attrs:{id:"extend-obj"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#extend-obj"}},[t._v("#")]),t._v(" "),a("code",[t._v("extend(obj)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("拼接一个消息数组或多个消息段到消息数组末尾")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("参数")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("obj: Union[Message, Iterable[MessageSegment]]")]),t._v(": 要添加的消息数组")])])])]),t._v(" "),a("h3",{attrs:{id:"extract-plain-text"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#extract-plain-text"}},[t._v("#")]),t._v(" "),a("code",[t._v("extract_plain_text()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("提取消息内纯文本消息")])])]),t._v(" "),a("h2",{attrs:{id:"class-event"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-event"}},[t._v("#")]),t._v(" "),a("em",[t._v("class")]),t._v(" "),a("code",[t._v("Event")])]),t._v(" "),a("p",[t._v("基类："),a("code",[t._v("abc.ABC")]),t._v(", "),a("code",[t._v("pydantic.main.BaseModel")])]),t._v(" "),a("p",[t._v("Event 基类。提供获取关键信息的方法，其余信息可直接获取。")]),t._v(" "),a("h3",{attrs:{id:"abstract-get-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-type"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract")]),t._v(" "),a("code",[t._v("get_type()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("获取事件类型的方法，类型通常为 NoneBot 内置的四种类型。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v('Literal["message", "notice", "request", "meta_event"]')])])]),t._v(" "),a("li",[a("p",[t._v("其他自定义 "),a("code",[t._v("str")])])])])])]),t._v(" "),a("h3",{attrs:{id:"abstract-get-event-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-event-name"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract")]),t._v(" "),a("code",[t._v("get_event_name()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("获取事件名称的方法。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("str")])])])])]),t._v(" "),a("h3",{attrs:{id:"abstract-get-event-description"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-event-description"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract")]),t._v(" "),a("code",[t._v("get_event_description()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("获取事件描述的方法，通常为事件具体内容。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("str")])])])])]),t._v(" "),a("h3",{attrs:{id:"get-log-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-log-string"}},[t._v("#")]),t._v(" "),a("code",[t._v("get_log_string()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("获取事件日志信息的方法，通常你不需要修改这个方法，只有当希望 NoneBot 隐藏该事件日志时，可以抛出 "),a("code",[t._v("NoLogException")]),t._v(" 异常。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("str")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("异常")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("NoLogException")])])])])]),t._v(" "),a("h3",{attrs:{id:"abstract-get-user-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-user-id"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract")]),t._v(" "),a("code",[t._v("get_user_id()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("获取事件主体 id 的方法，通常是用户 id 。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("str")])])])])]),t._v(" "),a("h3",{attrs:{id:"abstract-get-session-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-session-id"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract")]),t._v(" "),a("code",[t._v("get_session_id()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("获取会话 id 的方法，用于判断当前事件属于哪一个会话，通常是用户 id、群组 id 组合。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("str")])])])])]),t._v(" "),a("h3",{attrs:{id:"abstract-get-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-get-message"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract")]),t._v(" "),a("code",[t._v("get_message()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("获取事件消息内容的方法。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Message")])])])])]),t._v(" "),a("h3",{attrs:{id:"get-plaintext"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-plaintext"}},[t._v("#")]),t._v(" "),a("code",[t._v("get_plaintext()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("获取消息纯文本的方法，通常不需要修改，默认通过 "),a("code",[t._v("get_message().extract_plain_text")]),t._v(" 获取。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("str")])])])])]),t._v(" "),a("h3",{attrs:{id:"abstract-is-tome"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract-is-tome"}},[t._v("#")]),t._v(" "),a("em",[t._v("abstract")]),t._v(" "),a("code",[t._v("is_tome()")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("获取事件是否与机器人有关的方法。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("返回")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("bool")])])])])]),t._v(" "),a("h2",{attrs:{id:"class-messagetemplate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-messagetemplate"}},[t._v("#")]),t._v(" "),a("em",[t._v("class")]),t._v(" "),a("code",[t._v("MessageTemplate")])]),t._v(" "),a("p",[t._v("基类："),a("code",[t._v("string.Formatter")]),t._v(", "),a("code",[t._v("Generic")]),t._v("["),a("code",[t._v("nonebot.adapters._template.TM")]),t._v("]")]),t._v(" "),a("p",[t._v("消息模板格式化实现类")]),t._v(" "),a("h3",{attrs:{id:"format-args-kwargs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#format-args-kwargs"}},[t._v("#")]),t._v(" "),a("code",[t._v("format(*args, **kwargs)")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("说明")])]),t._v(" "),a("p",[t._v("根据模板和参数生成消息对象")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);