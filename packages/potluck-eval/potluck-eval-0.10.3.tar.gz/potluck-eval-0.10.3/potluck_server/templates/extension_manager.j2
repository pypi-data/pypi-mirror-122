{# vim: set shiftwidth=2 tabstop=2 syntax=html: #}
{% extends "base.j2" %}

{% block body_attrs %}
class="extension_manager fullwidth"
{% endblock %}

{% block main_content %}
<div class="container">
  <a
   href="{{url_for("route_dash", course=course, semester=semester)}}"
   title="Click here to go back to the dashboard"
   tabindex="0"
  >Back to the dashboard</a>

<h2>
  Extensions for {{ target_user }}
</h2>

Note: enter extensions in hours as an integer.

<ul class="psets">
  {% for ps in task_info["psets"] %}
    {% set initial = ps["status"]["initial_extension"] %}
    {% set revision = ps["status"]["revision_extension"] %}
    {% if initial != 0 or revision != 0 %}
      {% set ext_class = "has-extension" %}
    {% else %}
      {% set ext_class = "no-extension" %}
    {% endif %}
    <li class="pset {{ ext_class }}" id="{{ps["id"]}}">
      <form
       action="{{url_for(
         'route_set_extensions',
         course=course,
         semester=semester,
         target_user=target_user,
         psid=ps["id"]
       )}}"
       method="POST"
      >
        {# CSRF token for flask_seasurf #}
        <input
         type="hidden"
         name="_csrf_token"
         value="{{csrf_token()}}"
        >
        {{ ps["id"] }}<br>
        <label for="{{ps["id"]}}-initial">
          initial extension:
          <input
           class="extension-hours-input"
           id="{{ps["id"]}}-initial"
           name="initial"
           type="text"
           value="{{ initial }}"
          >
          hours
        </label><br>
        <label for="{{ps["id"]}}-initial">
          revision extension:
          <input
           class="extension-hours-input"
           id="{{ps["id"]}}-revision"
           name="revision"
           type="text"
           value="{{ revision }}"
          >
          hours
        </label><br>
        <input type="submit" value="Update {{ps["id"]}}">
      </form>
    </li>
  {% endfor %}
</ul>

</div> <!-- end of container -->

{% endblock %}
